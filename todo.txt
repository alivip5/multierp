أنشئ تطبيق ويب ERP كامل ومتعدد الشركات (Multi-Company) باللغة العربية (واجهة RTL) مع دعم ثيمات ألوان: برتقالي (#FF6A00) وأسود، وثيم فاتح وثيم داكن، لشركات متعددة، وقابل للتطوير لاحقًا لإضافة تطبيق موبايل Flutter يعمل عبر نفس REST API، على Hostinger (PHP + MySQL).
المواصفات المطلوبة:
1️⃣ الشركات (Companies):
- يمكن للنظام إدارة أكثر من شركة.
- جدول قاعدة بيانات companies يحتوي على: id, name, logo, address, tax_number, commercial_registry, created_at.
- جميع البيانات الخاصة بالشركة (الموديولات، المستخدمين، المبيعات، المخازن، الحسابات، إلخ) مرتبطة بـ company_id.
- عند تسجيل الدخول، يختار المستخدم الشركة التي يريد العمل عليها أو يتم تقييد الوصول للشركة المحددة.
2️⃣ الموديولات (Modules):
- المبيعات (Sales), المشتريات (Purchase), المخازن (Inventory), الحسابات (Accounting), شؤون العاملين (HR), الإنتاج (Production - اختياري), وأي موديول جديد مستقبلي.
- جميع الموديولات منفصلة (modular) ويمكن تفعيلها أو تعطيلها ديناميكيًا لكل شركة.
- جدول modules يحتوي على: id, company_id, name, slug, status (enabled/disabled).
- عند تعطيل أي موديول في شركة معينة:
  - لا يظهر في لوحة التحكم Web لتلك الشركة.
  - لا يظهر في تطبيق Flutter لتلك الشركة.
  - أي REST API endpoint يعيد رسالة: "هذا الموديول غير مفعل".
- عند تفعيل الموديول: جميع الوظائف والقوائم تعمل طبيعيًا.
3️⃣ نظام تسجيل الدخول والأدوار:
- أدوار المستخدمين: super_admin, manager, accountant, storekeeper, sales, purchasing, hr, data_entry, guest.
- كل مستخدم مرتبط بشركة واحدة أو أكثر.
- اسم المستخدم الافتراضي: admin، كلمة المرور: admin.
- الصلاحيات مرتبطة بالموديولات وحالتها لكل شركة.
- نظام الجلسات وJWT لتوثيق API.
- التحقق من صلاحيات المستخدم قبل عرض أي قائمة أو زر أو تنفيذ أي endpoint.
4️⃣ صفحة الإعدادات:
- إعدادات الشركة: الاسم، اللوجو، العنوان، الرقم الضريبي، السجل التجاري.
- إعدادات الطباعة: تصميم الفاتورة، حجم الورق، الشعارات، التذييل.
- إعدادات العملة والضرائب: العملة، المنازل العشرية، نسب الضريبة.
- إعدادات البيانات: نسخ احتياطي، استعادة، استيراد/تصدير Excel لكل شركة.
- إعدادات الأمان والصيانة: تغيير كلمة المرور، التحكم في الجلسات، وضع الصيانة.
- إدارة الثيمات: برتقالي وأسود كافتراضي + ثيم فاتح وثيم داكن.
- إدارة الموديولات: تفعيل/تعطيل كل موديول ديناميكيًا لكل شركة.
5️⃣ REST API:
- JSON responses فقط.
- JWT Tokens لتوثيق API.
- Conditional access حسب حالة الموديول لكل شركة.
- Versioning (/api/v1/...).
- Rate limiting وLogging.
- أي endpoint لموديول معطل في الشركة يعيد رسالة: "هذا الموديول غير مفعل".
- جميع الاستعلامات مرتبطة بـ company_id لضمان عزل بيانات الشركات.
6️⃣ Flutter Mobile:
- واجهة عربية RTL، ألوان برتقالي وأسود، responsive.
- Conditional Rendering لكل موديول حسب التفعيل في الشركة المحددة.
- تسجيل الدخول وصلاحيات المستخدم متزامنة مع Web لكل شركة.
- Pagination، فلترة، رسائل خطأ ونجاح بالعربية.
- Offline queue باستخدام sqflite مع مزامنة تلقائية.
- دعم Firebase Cloud Messaging للإشعارات حسب الموديول والشركة (اختياري).
7️⃣ تحسينات إضافية:
- Audit Trail لكل التعديلات والعمليات المهمة لكل شركة.
- Backup & Restore مستقل لكل شركة.
- Installer Script لإنشاء قاعدة البيانات والمستخدمين الافتراضيين لكل شركة تلقائيًا.
- Security: كلمات مرور مشفرة bcrypt، حماية CSRF وXSS، HTTPS mandatory.
- Dynamic Menus & Permissions: القوائم تتولد تلقائيًا حسب الموديولات المفعلة وصلاحيات المستخدم لكل شركة.
- Modular Code Structure: كل موديول له مجلد مستقل Web & API & Flutter لتسهيل التطوير والصيانة.
8️⃣ النتيجة المتوقعة:
- تطبيق ويب ERP متعدد الشركات وجاهز للرفع على Hostinger.
- REST API موحد لكل الموديولات مع دعم التفعيل/التعطيل لكل شركة.
- تطبيق Flutter موبايل جاهز للعمل على Android وiOS متصل بالـ API لكل شركة.
- أي موديول جديد يمكن إضافته دون تعديل باقي النظام.
- تجربة مستخدم سلسة، أمان عالي، وصيانة سهلة لكل شركة.